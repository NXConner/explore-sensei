{
  "provider": "aws-secrets-manager",
  "region": "us-east-1",
  "environments": [
    {
      "name": "development",
      "vault": "pps/app/dev",
      "rotationDays": 0,
      "notes": "Local developers pull from Doppler fallback when AWS access is unavailable."
    },
    {
      "name": "staging",
      "vault": "pps/app/staging",
      "rotationDays": 14,
      "notes": "Used by preview deployments and QA automation."
    },
    {
      "name": "production",
      "vault": "pps/app/production",
      "rotationDays": 30,
      "notes": "Authoritative store for live credentials."
    }
  ],
  "mappings": [
    {
      "secretId": "pps/app/supabase",
      "description": "Supabase service keys and JWT secret",
      "env": {
        "SUPABASE_SERVICE_ROLE_KEY": "service_role_key",
        "SUPABASE_JWT_SECRET": "jwt_secret",
        "VITE_SUPABASE_URL": "rest_url"
      }
    },
    {
      "secretId": "pps/app/maps",
      "description": "Mapping provider API keys",
      "env": {
        "VITE_GOOGLE_MAPS_API_KEY": "google_maps_primary",
        "VITE_GOOGLE_MAPS_API_KEY_ALT": "google_maps_backup",
        "VITE_MAPBOX_ACCESS_TOKEN": "mapbox"
      }
    },
    {
      "secretId": "pps/app/ml",
      "description": "Internal ML API credentials and logging sink",
      "env": {
        "VITE_AI_SERVICE_KEY": "primary_key",
        "VITE_LOG_SINK_KEY": "logging_token",
        "VITE_OTEL_EXPORT_API_KEY": "otel_token"
      }
    }
  ],
  "sync": {
    "mode": "replace",
    "target": ".env.runtime",
    "fallback": "doppler secrets download --project pavement-performance-suite --config $NODE_ENV --no-file --format env"
  },
  "bootstrap": {
    "command": "aws secretsmanager get-secret-value --secret-id pps/app/$NODE_ENV --query SecretString --output text",
    "notes": "Run during container start or CI job to materialize .env.runtime before `npm run build`."
  },
  "rotation": {
    "notify": ["security@exploresensei.com"],
    "playbook": "docs/SECURITY_HARDENING.md#credential-rotation"
  }
}
